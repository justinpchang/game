{"version":3,"sources":["../../server/routes/secure.js"],"names":["express","require","asyncMiddleware","UserModel","router","Router","post","req","res","next","body","email","score","updateOne","highScore","status","json","get","find","sort","limit","users","module","exports"],"mappings":";;;;;;;;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,eAAe,GAAGD,OAAO,CAAC,+BAAD,CAA/B;;AACA,IAAME,SAAS,GAAGF,OAAO,CAAC,qBAAD,CAAzB;;AAEA,IAAMG,MAAM,GAAGJ,OAAO,CAACK,MAAR,EAAf;AAEAD,MAAM,CAACE,IAAP,CACE,eADF,EAEEJ,eAAe;AAAA,2FAAC,iBAAOK,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACWF,GAAG,CAACG,IADf,EACNC,KADM,aACNA,KADM,EACCC,KADD,aACCA,KADD;AAAA;AAAA,mBAERT,SAAS,CAACU,SAAV,CAAoB;AAAEF,cAAAA,KAAK,EAALA;AAAF,aAApB,EAA+B;AAAEG,cAAAA,SAAS,EAAEF;AAAb,aAA/B,CAFQ;;AAAA;AAGdJ,YAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,cAAAA,MAAM,EAAE;AAAV,aAArB;;AAHc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD;;AAAA;AAAA;AAAA;AAAA,IAFjB;AASAX,MAAM,CAACa,GAAP,CACE,SADF,EAEEf,eAAe;AAAA,4FAAC,kBAAOK,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACMN,SAAS,CAACe,IAAV,CAAe,EAAf,EAAmB,qBAAnB,EACjBC,IADiB,CACZ;AAAEL,cAAAA,SAAS,EAAE,CAAC;AAAd,aADY,EAEjBM,KAFiB,CAEX,EAFW,CADN;;AAAA;AACRC,YAAAA,KADQ;AAIdb,YAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBK,KAArB;;AAJc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD;;AAAA;AAAA;AAAA;AAAA,IAFjB;AAUAC,MAAM,CAACC,OAAP,GAAiBnB,MAAjB","sourcesContent":["const express = require(\"express\");\nconst asyncMiddleware = require(\"../middleware/asyncMiddleware\");\nconst UserModel = require(\"../models/userModel\");\n\nconst router = express.Router();\n\nrouter.post(\n  \"/submit-score\",\n  asyncMiddleware(async (req, res, next) => {\n    const { email, score } = req.body;\n    await UserModel.updateOne({ email }, { highScore: score });\n    res.status(200).json({ status: \"ok\" });\n  })\n);\n\nrouter.get(\n  \"/scores\",\n  asyncMiddleware(async (req, res, next) => {\n    const users = await UserModel.find({}, \"name highScore -_id\")\n      .sort({ highScore: -1 })\n      .limit(10);\n    res.status(200).json(users);\n  })\n);\n\nmodule.exports = router;\n"],"file":"secure.js"}